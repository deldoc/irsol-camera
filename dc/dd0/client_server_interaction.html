<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IRSOL: 05-client-server-interaction</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../irsol_logo.jpeg"/></td>
  <td id="projectalign">
   <div id="projectname">IRSOL
   </div>
   <div id="projectbrief">C++ code implementing socket server for interacting with Baumer camera.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/dd0/client_server_interaction.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">05-client-server-interaction</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/df6/examples_205-client-server-interaction_2main_8cpp.html" title="Demonstrates a sample client-server interaction using sockets.">examples/05-client-server-interaction/main.cpp</a></dd></dl>
<p>This guide will introduce you to the basics of client-server communication in the <code>irsol</code> system, even if you have never worked with <code>irsol</code> or network programming before. We will cover:</p>
<ul>
<li>What sockets are and why they're important</li>
<li>How the <code>irsol</code> server uses sockets to communicate</li>
<li>How to build a simple C++ client to connect, send, and receive messages</li>
</ul>
<h1>1. What Are Sockets?</h1>
<p>A <b>socket</b> is an endpoint for sending or receiving data across a computer network. Think of it as a virtual "plug" that allows two programs (often on different computers) to talk to each other.</p>
<ul>
<li><b>Server socket:</b> Listens for incoming connections.</li>
<li><b>Client socket:</b> Connects to a server and exchanges data.</li>
</ul>
<p><b>Note</b>: communication through the socket is bidirectional and asynchronous. This is very different from other communication strategies like the "request-response" model.</p>
<div class="fragment"><div class="line">[Server] &lt;--- socket ---&gt; [Client]</div>
</div><!-- fragment --><p><b>Note</b>: a single server can have connections to multiple clients at the same time. Every connection is independently handled. In <code>irsol</code> every client is server by a dedicated thread that manages the communication with the client. </p><dl class="section see"><dt>See also</dt><dd>server_architecture</dd></dl>
<h1>2. How <code>irsol</code> Uses Sockets</h1>
<p>The <code>irsol</code> server uses sockets to allow clients to connect and exchange protocol messages. Under the hood, <code>irsol</code> uses the <a href="https://github.com/fpagliughi/sockpp">sockpp</a> C++ library to manage sockets in a cross-platform way.</p>
<ul>
<li>The <b>server app</b> creates a listening socket (TCP) on a specified port.</li>
<li>Each <b>client</b> connects to this port using its own socket.</li>
<li>Messages are exchanged using a defined protocol (see <a class="el" href="../../db/dff/namespaceirsol_1_1protocol.html">irsol::protocol</a>).</li>
</ul>
<p>**<code>irsol</code> Server App Flow:**</p>
<ol type="1">
<li>Start server, bind to a port (e.g., 5555).</li>
<li>Wait for client connections.</li>
<li>For each client:<ul>
<li>Accept connection.</li>
<li>Read messages, process, and send responses.</li>
</ul>
</li>
</ol>
<h1>3. Example: Building a Simple C++ Client</h1>
<p>Let's walk through a minimal C++ client that connects to an <code>irsol</code> server, sends a message, and receives a response.</p>
<h2>Prerequisites</h2>
<ul>
<li>C++17 or later</li>
<li><a href="https://github.com/fpagliughi/sockpp">sockpp</a> library installed</li>
</ul>
<h2>Example Client Code</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;sockpp/tcp_connector.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../d0/da9/examples_200-logging-and-asserting_2main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <span class="comment">// Connect to server at localhost:5555</span></div>
<div class="line">    sockpp::tcp_connector conn({<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 5555});</div>
<div class="line">    <span class="keywordflow">if</span> (!conn) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error connecting to server\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Send a message (for example, a simple string)</span></div>
<div class="line">    std::string <a class="code hl_variable" href="../../de/d08/test__parser_8cpp.html#a79750f20a308d13607bec2b6cefa0fc8">msg</a> = <span class="stringliteral">&quot;Hello, `irsol` server!&quot;</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (conn.write(<a class="code hl_variable" href="../../de/d08/test__parser_8cpp.html#a79750f20a308d13607bec2b6cefa0fc8">msg</a>) != <a class="code hl_variable" href="../../de/d08/test__parser_8cpp.html#a79750f20a308d13607bec2b6cefa0fc8">msg</a>.size()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error sending message\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Receive a response</span></div>
<div class="line">    <span class="keywordtype">char</span> buf[256];</div>
<div class="line">    ssize_t n = conn.read(buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">    <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Received: &quot;</span> &lt;&lt; std::string(buf, n) &lt;&lt; std::endl;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Error receiving response\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aexamples_200-logging-and-asserting_2main_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="../../d0/da9/examples_200-logging-and-asserting_2main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> <a href="../../d0/da9/examples_200-logging-and-asserting_2main_8cpp_source.html#l00090">main.cpp:90</a></div></div>
<div class="ttc" id="atest__parser_8cpp_html_a79750f20a308d13607bec2b6cefa0fc8"><div class="ttname"><a href="../../de/d08/test__parser_8cpp.html#a79750f20a308d13607bec2b6cefa0fc8">msg</a></div><div class="ttdeci">auto msg</div><div class="ttdef"><b>Definition</b> <a href="../../de/d08/test__parser_8cpp_source.html#l00085">test_parser.cpp:85</a></div></div>
</div><!-- fragment --><p> <b>Note</b>: In a real <code>irsol</code> system, you would use the <code>irsol</code> protocol to format messages, not just plain strings. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/dff/namespaceirsol_1_1protocol.html" title="Core protocol message types, serialization, parsing, and communication utilities for the irsol framew...">irsol::protocol</a></dd></dl>
<h1>4. How the <code>irsol</code> Server Handles Clients</h1>
<p>When you run the <code>irsol</code> server app, it:</p>
<ul>
<li>Listens for incoming TCP connections.</li>
<li>For each client, creates a session and processes messages using registered handlers in a client-dedicate thread.</li>
<li>Sends responses back to the client, either as an immediate action triggered from the incoming message (e.g. a <a class="el" href="../../d2/dc8/structirsol_1_1protocol_1_1Inquiry.html">irsol::protocol::Inquiry</a>), or asynchronously (e.g. processing the <code>gis</code> command).</li>
</ul>
<div class="fragment"><div class="line">+-------------------+      +-------------------+</div>
<div class="line">| IRSOL Client 1    | ---&gt; |                   |</div>
<div class="line">+-------------------+      |                   |</div>
<div class="line">                           |                   |</div>
<div class="line">+-------------------+      |                   |</div>
<div class="line">| IRSOL Client 2    | ---&gt; |   IRSOL Server    |</div>
<div class="line">+-------------------+      |                   |</div>
<div class="line">                           |                   |</div>
<div class="line">+-------------------+      |                   |</div>
<div class="line">| IRSOL Client N    | ---&gt; |                   |</div>
<div class="line">+-------------------+      +-------------------+</div>
</div><!-- fragment --><h1>5. Next Steps</h1>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/df6/examples_205-client-server-interaction_2main_8cpp.html" title="Demonstrates a sample client-server interaction using sockets.">examples/05-client-server-interaction/main.cpp</a></dd></dl>
<p>Explore the example server and client code in this folder. Try running the server and connecting with multiple clients. Experiment with sending different messages and handling responses. For more details on the <code>irsol</code> protocol and message handlers, see the other examples and the API documentation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
